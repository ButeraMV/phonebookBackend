(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,n,t){e.exports=t(40)},21:function(e,n,t){},39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(13),u=t.n(o),c=(t(21),t(14)),i=t(2),l=t(3),m=t.n(l),s="/api/persons",f=function(){return m.a.get(s).then(function(e){return e.data})},d=function(e){return m.a.post(s,e).then(function(e){return e.data})},p=function(e){return m.a.delete("".concat(s,"/").concat(e)).then(function(e){return e.data})},h=function(e,n){return m.a.put("".concat(s,"/").concat(e),n).then(function(e){return e.data})},b=function(e){var n=e.onChangeEvent;return r.a.createElement("p",null,"filter shown with ",r.a.createElement("input",{onChange:n}))},E=function(e){var n=e.submitEvent,t=e.nameChange,a=e.numberChange;return r.a.createElement("form",{onSubmit:n,id:"phonebook-form"},r.a.createElement("div",null,"name: ",r.a.createElement("input",{onChange:t})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{onChange:a})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},v=function(e){var n=e.person,t=e.deletePersonButtonEvent;return r.a.createElement("p",null,n.name," ",n.number," ",r.a.createElement("button",{onClick:t},"delete"))},g=function(e){var n=e.persons,t=e.filter,a=e.deletePersonButtonEvent,o=n.filter(function(e){return e.name.toLowerCase().includes(t.toLowerCase())});return r.a.createElement(r.a.Fragment,null,o.map(function(e){return r.a.createElement(v,{key:e.id,person:e,deletePersonButtonEvent:function(){return a(e.id)}})}))},w=(t(39),function(e){var n=e.notification;return null===n.message?null:r.a.createElement("div",{className:n.type},n.message)}),y=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],u=Object(a.useState)(""),l=Object(i.a)(u,2),m=l[0],s=l[1],v=Object(a.useState)(""),y=Object(i.a)(v,2),C=y[0],j=y[1],O=Object(a.useState)(""),k=Object(i.a)(O,2),B=k[0],P=k[1],S=Object(a.useState)({message:null,type:null}),T=Object(i.a)(S,2),L=T[0],N=T[1];Object(a.useEffect)(function(){f().then(function(e){o(e)})},[]);var D=function(e){var n=t.find(function(n){return n.name===e.name}),a=Object(c.a)({},n,{number:e.number});h(n.id,a).then(function(e){o(t.map(function(t){return t.id!==n.id?t:e})),N({message:"".concat(a.name," has been updated."),type:"success"}),setTimeout(function(){N(null)},5e3)}).catch(function(e){N({message:"".concat(n.name," was already removed from server"),type:"error"}),setTimeout(function(){N({message:null,type:null})},5e3),o(t.filter(function(e){return e.id!==n.id}))})},I=function(){return document.getElementById("phonebook-form").reset()};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(w,{notification:L}),r.a.createElement(b,{onChangeEvent:function(e){P(e.target.value)}}),r.a.createElement("h3",null,"Add New Entry"),r.a.createElement(E,{submitEvent:function(e){e.preventDefault();for(var n=!1,a=0;a<t.length;a++)t[a].name.toLowerCase()===m.toLowerCase()&&(n=!0);var r={name:m,number:C};n?window.confirm("".concat(r.name," is already in the phonebook. Replace the old number with the new one?"))?D(r):(s(""),j(""),I()):d(r).then(function(e){o(t.concat(e)),N({message:"".concat(e.name," has been added to the Phonebook."),type:"success"}),setTimeout(function(){N({message:null,type:null})},5e3),s(""),j(""),I()}).catch(function(e){N({message:"".concat(e.response.data.error),type:"error"}),setTimeout(function(){N({message:null,type:null})},5e3)})},nameChange:function(e){s(e.target.value)},numberChange:function(e){j(e.target.value)}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(g,{persons:t,filter:B,deletePersonButtonEvent:function(e){var n=t.find(function(n){return n.id===e});window.confirm("Delete ".concat(n.name,"?"))&&p(n.id).then(o(t.filter(function(n){return n.id!==e}))).catch(function(a){N({message:"".concat(n.name," was already removed from server"),type:"error"}),setTimeout(function(){N({message:null,type:null})},5e3),o(t.filter(function(n){return n.id!==e}))})}}))};u.a.render(r.a.createElement(y,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.d1f66224.chunk.js.map